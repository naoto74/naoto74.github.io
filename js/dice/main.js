(()=>{"use strict";let a="getElementById",b="getElementsByClassName",c=document[a]("colorHInput"),d=document[a]("colorSInput"),e=document[a]("colorLInput"),g=document[a]("DiceSound"),h=document[b]("diceItem"),i=document[a]("diceJavaSparrow"),j=c.value=340,k=d.value=18,l=e.value=80,m={"1 to 6":{},"0 to 20":{},"1 to 4":{},j:{}},n=[{h:"#844",b:"#c88",g:"#fff",f:!1},{h:"#333",b:"#888",g:"#fff",f:!1},{h:"none",b:"#fff",g:"none",f:!1},{h:"#333",b:"#666",g:"#fff",f:!0},{h:"none",b:"#ccc",g:"#fff",f:!0}];function o(c){let h=c[b]("diceBody")[0],e=[];c.dataset.range.split(" + ").map(c=>{let a=c.match(/(?<dirmin>\d+)\s+to\s+(?<dirmax>\d+)\s+\/\s+(?<min>\d+)\s+to\s+(?<max>\d+)\s+\*\s+(?<count>\d+)/).groups;for(let b=0;b<a.count;b++)e.push({dirmin:Number(a.dirmin),dirmax:Number(a.dirmax),min:Number(a.min),max:Number(a.max)})});let i=c.dataset.name,j=c.dataset.method;c[b]("diceTitle")[0].textContent=i;let d=[];for(let a=0;a<e.length;a++)d[a]=document.createElementNS("http://www.w3.org/2000/svg","svg"),d[a].setAttribute("viewBox","0 0 100 100"),d[a].innerHTML=m[`${e[a].dirmin} to ${e[a].dirmax}`].init,h.appendChild(d[a]);let f=document.createElement("p");f.className="diceResult",f.textContent="?",h.appendChild(f),c.addEventListener("click",()=>{g.currentTime=0,g.play();for(let a=0;a<15;a++){var b;setTimeout(()=>{let b=0;for(let a=0;a<e.length;a++){let c=e[a].min+Math.floor((e[a].max-e[a].min+1)*Math.random());d[a].innerHTML=m[`${e[a].dirmin} to ${e[a].dirmax}`][`${c}`],"add"==j?b+=c:"dec"==j&&(b+=c*Math.pow(10,e.length-(a+1)))}"dec"==j&&0==b&&(b=Math.pow(10,e.length-1)*(e[0].max+1)),"1d100"==i&&b>=96?(f.style.color="#f00",f.textContent="\u30D5\u30A1\u30F3\u30D6\u30EB"):"1d100"==i&&b<=5?(f.textContent="\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB",f.style.color="#ff0"):(f.textContent=b,f.style.color="#000")},100*a)}},{passive:!0})}function f(){j=c.valueAsNumber,k=d.valueAsNumber,l=e.valueAsNumber,document.documentElement.style.setProperty("--bgcolor",`hsl(${j}deg ${k}% ${l}%)`);let a=[];for(let b=0;b<10;b++)a.push(`hsl(${j}deg ${10*b}% ${l}%)`);d.style.background=`linear-gradient(to right,${a.join(",")})`,a=[];for(let f=0;f<10;f++)a.push(`hsl(${j}deg ${k}% ${10*f}%)`);e.style.background=`linear-gradient(to right,${a.join(",")})`}f(),window.addEventListener("load",()=>{let j='<polygon points="5,5 95,5 95,95 5,95" stroke="#d8d8d8" stroke-width="3" stroke-linejoin="round" fill="#fff"/>';m["1 to 6"]={init:j+'<text x="50" y="50" text-anchor="middle" dominant-baseline="central" stroke="#000" stroke-width="3" font-size="80" stroke-linejoin="round" font-family="monospace">?</text>',"1":j+'<polygon points="50,27.5 35,74.5 72.5,44.5 27.5,44.5 65,74.5" fill="#0ff" transform="rotate(45)" transform-origin="center"/><circle cx="48" cy="52" r="6" fill="white"/>',"2":j+'<circle cx="35" cy="35" r="10" fill="blue"/><circle cx="70" cy="70" r="10" fill="blue"/>',"3":j+'<circle cx="25" cy="25" r="10" fill="green"/><circle cx="50" cy="50" r="10" fill="green"/><circle cx="75" cy="75" r="10" fill="green"/>',"4":j+'<circle cx="30" cy="30" r="10" fill="purple"/><circle cx="30" cy="70" r="10" fill="purple"/><circle cx="70" cy="30" r="10" fill="purple"/><circle cx="70" cy="70" r="10" fill="purple"/>',"5":j+'<circle cx="30" cy="30" r="10" fill="darkblue"/><circle cx="30" cy="70" r="10" fill="darkblue"/><circle cx="70" cy="30" r="10" fill="darkblue"/><circle cx="70" cy="70" r="10" fill="darkblue"/><circle cx="50" cy="50" r="10" fill="darkblue"/>',"6":j+'<circle cx="30" cy="25" r="10" fill="darkgreen"/><circle cx="70" cy="25" r="10" fill="darkgreen"/><circle cx="30" cy="50" r="10" fill="darkgreen"/><circle cx="70" cy="50" r="10" fill="darkgreen"/><circle cx="30" cy="75" r="10" fill="darkgreen"/><circle cx="70" cy="75" r="10" fill="darkgreen"/>'};let s='<polygon points="50,5 95,50, 50,95 5,50" stroke="#d8d8d8" stroke-width="3" stroke-linejoin="round" fill="#eee"/><polygon points="50,50 20,65 50,95" stroke="#d8d8d8" stroke-width="3" stroke-linejoin="round" fill="#eee"/><polygon points="50,50 80,65 50,95" stroke="#d8d8d8" stroke-width="3" stroke-linejoin="round" fill="#eee"/><polygon points="50,5 75,60 50,80 25,60" stroke="#d8d8d8" stroke-width="3" stroke-linejoin="round" fill="#fff"/><text x="50" y="50" text-anchor="middle" dominant-baseline="central" stroke="#000" stroke-width="3" font-size="30" stroke-linejoin="round" font-family="monospace">';m["0 to 20"].init=s+"?</text>";for(let l=0;l<=20;l++)m["0 to 20"][l]=s+l+"</text>";let t='<polygon points="50,5 95,90 5,90" stroke="#d8d8d8" stroke-width="3" stroke-linejoin="round" fill="#fff"/><text x="50" y="60" text-anchor="middle" dominant-baseline="central" stroke="#000" stroke-width="3" font-size="40" stroke-linejoin="round" font-family="monospace">';m["1 to 4"].init=t+"?</text>";for(let p=1;p<=4;p++)m["1 to 4"][p]=t+p+"</text>";m.j.init='<g stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="#fff" d="M22 122C6-17 98-25 105 50c50 38 70 71 121 134-39-6-52-1-94 22-48 0-96-30-110-84Z"/><path fill="#F88" d="M30 37 3 40l21 19 6-22"/></g><path d="M46 42a6 6 0 0 1 12 0 6 6 0 0 1-12 0Z"/>';for(let a=0;a<n.length;a++)m.j[a]=(n[a].f?'<filter xmlns="http://www.w3.org/2000/svg" id="f1" filterUnits="userSpaceOnUse"><feTurbulence type="fractalNoise" baseFrequency="0.03" numOctaves="5" seed="3" stitchTiles="stitch" result="noise"/><feColorMatrix in="noise" type="saturate" values="0" result="mono"/><feComposite in="mono" in2="SourceGraphic" operator="in" result="res"/><feBlend in="res" in2="SourceGraphic" mode="lighten"/></filter>':"")+'<g stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="$b$" filter="$f$" d="M22 122C6-17 98-25 105 50c50 38 70 71 121 134-39-6-52-1-94 22-48 0-96-30-110-84Z"/><path fill="$h$" stroke="$h2$" filter="$f$" d="M31 32C42 16 43 6 67 3c23 3 29 14 34 27 8 11-9 5-33 5s-47 7-37-3Z"/><path fill="$g$" stroke="$g2$" d="M27 49c0-13 5-12 41-14 37 0 37 1 37 15 7 10-13 18-35 20-34-1-51-10-43-21Z"/><path fill="#F88" d="M30 37 3 40l21 19 6-22"/></g><path d="M46 42a6 6 0 0 1 12 0 6 6 0 0 1-12 0Z"/>'.replaceAll("$f$",n[a].f?"url(#f1)":"none").replaceAll("$h$",n[a].h).replaceAll("$h2$","none"==n[a].h?"none":"#000").replaceAll("$b$",n[a].b).replaceAll("$g$",n[a].g).replaceAll("$g2$","none"==n[a].g?"none":"#000");for(let r=0;r<h.length;r++)o(h[r]);{let u=i[b]("diceBody")[0];i[b]("diceTitle")[0].textContent="JavaSparrow";let q=[];for(let k=0;k<n.length;k++)q[k]=document.createElementNS("http://www.w3.org/2000/svg","svg"),q[k].setAttribute("viewBox","0 0 230 210"),q[k].innerHTML=m.j.init,u.appendChild(q[k]);i.addEventListener("click",()=>{g.currentTime=0,g.play();for(let a=0;a<15;a++){var b;setTimeout(()=>{for(let a=0;a<n.length;a++)q[a].innerHTML=m.j[`${Math.floor(n.length*Math.random())}`]},100*a)}},{passive:!0})}c.addEventListener("input",()=>{f()},{passive:!0}),d.addEventListener("input",()=>{f()},{passive:!0}),e.addEventListener("input",()=>{f()},{passive:!0})},{once:!0})})()